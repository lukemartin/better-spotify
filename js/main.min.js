/**
 * spotify-browser - spotify-browser
 * @version v0.0.0
 * @link https://github.com/lukemartin/spotify-browser
 */
(function(){var t;t=angular.module("betterSpotify",["ngRoute"]),t.config(["$routeProvider","$locationProvider","$compileProvider",function(t,e,o){return o.aHrefSanitizationWhitelist(/^\s*(https?|file|tel|spotify):/),e.html5Mode(!0),t.when("/meow",{templateUrl:"partials/meow.html"}).when("/artists/:id",{templateUrl:"partials/artist.html",controller:"ArtistController"}).when("/auth",{templateUrl:"partials/auth.html",controller:"AuthController"}).when("/authed",{templateUrl:"partials/meow.html",controller:"AuthedController"}).when("/user",{templateUrl:"partials/user.html",controller:"UserController"}).otherwise({templateUrl:"partials/main.html",controller:"HomeController"})}]),t.controller("HomeController",["$scope","$http",function(t,e){return t.getArtists=function(o){return e.get("https://api.spotify.com/v1/search?q="+o+"&type=artist").success(function(e){return console.log(e.artists.items),t.artists=e.artists.items}).error(function(t){return console.log(t)})}}]),t.controller("ArtistController",["$scope","$http","$routeParams",function(t,e,o){return e.get("https://api.spotify.com/v1/artists/"+o.id).success(function(e){return console.log(e),t.artist=e}).error(function(t){return console.log(t)}),e.get("https://api.spotify.com/v1/artists/"+o.id+"/albums?limit=50").success(function(e){return console.log(e),t.albums=e.items}).error(function(t){return console.log(t)})}]),t.controller("AuthController",["$scope","$http",function(){var t,e;return t="59d6d5180eca418095c49cb30bc0c3a3",e=encodeURIComponent("http://localhost:4141/authed"),window.location="https://accounts.spotify.com/authorize?client_id="+t+"&response_type=token&redirect_uri="+e+"&scope=user-library-read user-library-modify"}]),t.controller("AuthedController",["$scope","$http","$location",function(){var t,e,o,r;return console.log("beep"),o=window.location.hash.split("&"),t=o[0].split("=")[1],r=o[1].split("=")[1],e=o[2].split("=")[1],window.localStorage.setItem("authed",!0),window.localStorage.setItem("accessToken",t),window.localStorage.setItem("tokenType",r),window.localStorage.setItem("expires",e),window.location="/user"}]),t.controller("UserController",["$scope","$http",function(t,e){var o;return o=function(){return e.get("https://api.spotify.com/v1/me/tracks?limit=50",{headers:{Authorization:"Bearer "+window.localStorage.getItem("accessToken")}}).success(function(e){return console.log(e),t.tracks=e}).error(function(t){return console.log(t)})},e.get("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+window.localStorage.getItem("accessToken")}}).success(function(e){return t.user=e,o()}).error(function(t){return console.log(t)})}])}).call(this);